---
title: '😎 자바스크립트 이벤트 루프란'
thumbSrc: '/static/images/js21.png'
date: '2021-07-12'
tags: ['FE', 'JavaScript']
draft: false
summary: '모던 자바스크립트를 학습하며 정리한 자료로 이벤트 루프에 대해 설명합니다.'
images: ['/static/images/js21.png']
authors: ['default']
---

# 📌 목차

![JS Event Loop](/static/images/js21.png)

- **💁🏻 이벤트 루프란**

- **🖥️ 이벤트 루프 코드 예시**

---

# 💁🏻 이벤트 루프란

함수를 실행시키면 해당 함수에 있는 **아직 호출 (실행)된 게 아닌 콜백함수들을 Web API에 담고 이 콜백함수들을 바로 호출 스택에 넣어주는 게 아니라 `태스크 큐`** 로 보냅니다.

이벤트 루프는 `호출 스택`이 비어있을 때 `태스크 큐` 안에 있는 콜백함수들을 꺼내서 `호출 스택`에 넣어 줍니다. 이때, 호출 스택에 올라간 함수들은 **실행되고 실행을 마치면 스택에서 사라집니다**.

즉, `백그라운드` ➡️ `태스크 큐` ➡️ 이벤트 루프에 의해서 `호출 스택` ➡️ `실행`, `스택에서 사라짐` ➡️ `백그라운드` ➡️ `태스크 큐` ➡️ 이벤트 루프에 의해서 `호출 스택`...의 비동기 실행과정이 반복되는 것입니다.

---

# 🖥️ 이벤트 루프 코드 예시

```javascript
console.log('Hi')

setTimeout(function cb1() {
  console.log('cb1')
}, 5000)

console.log('Bye')
```

위 코드가 실행되는 과정은 아래의 그림과 설명과 같습니다.

![Event Loop](/static/images/event-loop1.png)

- `console.log("Hi")`가 콜스택에 쌓인 뒤 실행됩니다.

- `setTimeout`이 콜백 함수인 `cb1`과 함께 `콜 스택`에 쌓인다. `setTimeout`은 실행되면 Web API의 `Timer API`를 호출됩니다. 따라서 여기서 `setTimeout`이 실행되면 Web API에 `Timer`가 `cb1` 이라는 콜백 함수를 가지고 등록됩니다. 그리고 `setTimeout`은 이미 실행 되었으니 `콜 스택`에서 사라집니다.

- `콜 스택`이 비어 있으면 다음 줄에 있는 함수를 등록시키며, `console.log("Bye")`를 `콜 스택`에 쌓고 실행합니다.

- Web API에 등록된 `Timer`의 시간이 다 지나면 `Timer`가 갖고 있던 콜백 함수인 `cb1`을 `태스크 큐`에 저장합니다.

- `태스크 큐`가 모두 비어지면 `이벤트 루프`가 `태스크 큐`에 **제일 처음 들어온 값**을 `콜 스택`으로 올려 줍니다.

- `콜 스택`은 `이벤트 루프`가 올려준 함수를 실행시키고 `콜 스택`은 비게 됩니다.

`태스크 큐`는 하나가 아닌 **여러 개가 존재**하고, 백그라운드에 있는 콜백 함수들이 **각각 다른 `태스크 큐`**에 담깁니다. `이벤트 루프`는 이런 **각 `태스크 큐`에 담긴 콜백 함수들을 우선 순위를 정해서 순서대로 `호출 스택`에 올려주는 역할**도 합니다.

---

### 🔗 Reference

[자바스크립트와 이벤트 루프](https://meetup.toast.com/posts/89)
