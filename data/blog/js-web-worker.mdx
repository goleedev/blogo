---
title: '😎 자바스크립트 웹 워커란'
thumbSrc: '/static/images/js32.png'
date: '2021-07-28'
tags: ['FE', 'JavaScript']
draft: false
summary: '모던 자바스크립트를 학습하며 정리한 자료로 웹 워커에 대해 설명합니다.'
images: ['/static/images/js32.png']
---

# 📌 목차

![JS Web Worker](/static/images/js32.png)

- **💁🏻 웹 워커란**

- **🗓️ 웹 워커가 사용되는 경우**

- **🔖 웹 워커의 종류**

---

# 💁🏻 웹 워커란

자바스크립트는 싱글 스레드로 동작 하는 언어이지만, `웹 워커`를 사용하면 브라우저에서 **멀티 스레드를 활용**할수 있습니다. 이는 싱글 스레드 방식이 연산이 많은 작업을 하는 경우, **그 작업이 완료되어야 다른 작업을 수행 할수 있다는 단점**때문에 필요한 것인데요. 예를 들면, 웹 게임에서 좌표를 계산하는 데 3초가 걸리고 계산된 좌표를 받아 DOM에 반영해야 한다고 하면, 좌표를 계산 하느라 3 초간 DOM 업데이트 등의 다른 작업들을 수행할 수가 없습니다. 이는 사용자 입장에서는 3 초라는 시간이 낭비하는 것이며, 만약 여러 변의 좌표 계산이 필요하게 되면 무한으로 늘어나게 됩니다. 하지만 이와 같은 짧은 지연 시간보다 **클릭 같은 다른 작업은 진행할 수 있어야 원활한 서비스를 제공할 수 없다는 점**이 더욱 큰 담점입니다. 이떄 `웹 워커`가 사용됩니다.

`웹 워커`는 **멀티 스레드 기능을 지원하며 워커가 생성될 때마다 자바스크립트를 실행할 수 있는 고유 스레드를 생성**하여 속도 성능을 크게 향상시킬 수 있습니다. 워커에서 실행하는 코드는 브라우저 UI에도 다른 워커에서 실행하는 코드에도 영향을 주지 않으며, **독립적으로 실행되는 멀티 스레드**입니다. 또한 워커는 **DOM에 직접 접근하지 못하기 때문에 메인 스레드와 서로 메시지를 주고 받아서 통신**합니다.

---

# 🗓️ 웹 워커가 사용되는 경우

- 매우 큰 문자열의 암호화/복호화
- 이미지/비디오 처리 포함한 복잡한 수학계산
- 매우 큰 배열의 정렬 등

위와 같이 큰 스크립트 파일을 사용할 때, 웹 워커가 사용됩니다.

---

# 🔖 웹 워커의 종류

웹 워커는 아래와 같은 2가지 종류가 존재합니다.

- **Dedicated worker (전용 워커)**: 생성한 워커가 하나의 스레드를 가지는 모델로, 워커를 생성한 곳만 통신합니다.
- **Shared worker (공유 워커)**: 여러 개의 워커가 하나의 백그라운드를 공유하는 모델로, 여러 상대와 통신을 할 수 있고 이에 따른 포트를 이용해야 합니다.

## 전용 워커

- `new Worker...` 형태로 생성합니다.
- `postMessage() method`를 이용합니다.
- 인자는 타입을 구별하지 않으며 `JSON`으로 직렬화되어 처리됩니다.
- 객체의 경우 `call by value` 방식으로 전달됩니다
- `onmessage() event handler`를 사용하여 데이터를 수신한 후 처리합니다.

## 공유 워커

- `new SharedWorker...` 형태로 생성합니다.
- 포트를 사용해야만 합니다.
- 첫 번째 사용되는 `postMessage()`에 `port method`를 사용해야 합니다.

---

### 🔗 Reference

[MDN 웹 워커](https://developer.mozilla.org/ko/docs/Web/API/Web_Workers_API)
